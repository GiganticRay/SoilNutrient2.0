<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"> 
	<title>Bootstrap 实例 - 弹出框（Popover）插件</title>
	<link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
	<script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style type="text/css">
        /*重构 popover */
.popover{background:#C00;color:#FFF;}
.popover .popover-content{padding:1px 5px;}
.popover.top>.arrow:after{border-top-color:#C00;}

/*重构 bootstrap 默认错误提示 */
.has-error input,
.has-error textarea,
.has-error select{background-color:#F2DEDE;}
.has-success input,
.has-success textarea,
.has-success select{background-color:#DFF0D8}
    </style>
    <script type="text/javascript">
        (function (jQuery) {
            $.extend({
                Vaild: function (_this) {
                    if (!!$(_this).data("vaild")) {
                        var pattern = new RegExp($(_this).data("vaild"));
                        if (pattern.test($(_this).val())) {
                            $(_this).parent().removeClass("has-error").addClass("has-success");
                            $(_this).popover("destroy");
                        } else {
                            $(_this).parent().addClass("has-error").removeClass("has-success");
                            $(_this).data("toogle", "top").data("placement", "top").data("container", "body").data("content", $(_this).data("errmsg")).popover({ "trigger": "manual" }).popover("show");
                            return false;
                        }
                    } else {
                        $(_this).parent().addClass("has-success");
                    }
                    return true;
                }
            });
            $.fn.extend({
                Vaild: function () {
                    $(this).each(function (index, _this) {
                        $(_this).submit(function () {
                            var checkResult = true;
                            for (var i = 0; i < _this.length; i++) {
                                checkResult = $.Vaild(_this[i]) && checkResult;
                            }
                            return checkResult;
                        });
                        for (var i = 0; i < _this.length; i++) {
                            $(_this[i]).blur(function () {
                                $.Vaild(this);
                            });
                        }
                    });
                }
            });
        })(jQuery);
    </script>
</head>
<body>

<div class="container" style="padding: 100px 50px 10px;" >
<!--	<button type="button" class="btn btn-primary" title="Popover title"  
			data-container="body" data-toggle="popover" data-placement="right" 
			data-content="左侧的 Popover 中的一些内容">
		左侧的 Popover
	</button>
    <br />
    <button type="button" class="btn btn-primary myclass" data-toggle="popover" >
		my pro
	</button>
    <input type="text" name="name" class="myclass" value=" " data-toggle="popover" />
    

    <br /><br /><br />
    
    <input type="text" id="q" data-toggle="tooltip" value="qwer " />
    <a href="#" data-toggle="tooltip">content</a>-->

    <input class="form-control" id="u_exam_idnumber" name="u_exam_idnumber" onblur="Vaild(this)" placeholder="请输入中考准考证号" data-vaild="^\d{5,20}$" data-errmsg="准考证号码不正确，仅能包含数字" 
</div>
<script>
    //$(function () {

        //placement: "top",    //定位方向
        //title: "懒人建站-jquery插件",  //如果不需要标题就不要配置这个选项
        //content: "内容：懒人建站"
        //trigger: "focus",    //如果设为focus 当按钮失去焦点提示层会消失，例如页面空白处单机提示层消失
        //placement: "bottom",
       
        //简单调用
//        $(".myclass").popover({
//            html: true,
//            content: '<p><font color="#fc4343">x 输入格式错误</font></p>'
//        });

//        $("#q").tooltip({
//            html: true,
//            content: '<p><font color="#fc4343">x 输入格式错误</font></p>'
////            title:"afsd"

//        });

//        $("[data-toggle='popover']").popover();
//        $("[data-toggle='tooltip']").tooltip();


  //  });

    //$("#u_exam_idnumber").Vaild();

    function Vaild(_this) {
                    if (!!$(_this).data("vaild")) {
                        var pattern = new RegExp($(_this).data("vaild"));
                        if (pattern.test($(_this).val())) {
                            $(_this).parent().removeClass("has-error").addClass("has-success");
                            $(_this).popover("destroy");
                        } else {
                            $(_this).parent().addClass("has-error").removeClass("has-success");
                            $(_this).data("toogle", "top").data("placement", "top").data("container", "body").data("content", $(_this).data("errmsg")).popover({ "trigger": "manual" }).popover("show");
                            return false;
                        }
                    } else {
                        $(_this).parent().addClass("has-success");
                    }
                    return true;
                }
</script>

</body>
</html>